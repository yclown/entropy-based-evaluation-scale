<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸“ä¸šå¿ƒç†æµ‹è¯• - ç†µå€¼ç»´åº¦åˆ†æï¼ˆæ­£äº”è¾¹å½¢é›·è¾¾å›¾ï¼‰</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Microsoft YaHei", sans-serif;
      }
      body {
        background-color: #f5f7fa;
        padding: 20px;
        line-height: 1.6;
      }
      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      }
      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
        font-weight: 600;
        font-size: 24px;
      }
      .btn-box {
        text-align: center;
        margin-bottom: 30px;
      }
      .reset-btn {
        padding: 10px 25px;
        border: none;
        background: #e74c3c;
        color: #fff;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.2s;
      }
      .reset-btn:hover {
        background: #c0392b;
      }
      .question-item {
        background: #f9fafe;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #4a89dc;
      }
      .question-title {
        font-size: 18px;
        color: #222;
        margin-bottom: 15px;
        font-weight: 500;
      }
      /* é€‰é¡¹æ¨ªå‘æ’åˆ— */
      .option-list {
        list-style: none;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .option-item {
        padding: 10px 20px;
        border-radius: 6px;
        background: #fff;
        border: 1px solid #e1e5eb;
        cursor: pointer;
        transition: all 0.2s ease;
        flex: 1;
        min-width: 120px;
        text-align: center;
      }
      .option-item:hover {
        background: #f0f5ff;
        border-color: #4a89dc;
      }
      .option-item.active {
        background: #4a89dc;
        color: #fff;
        border-color: #4a89dc;
      }
      .score-area {
        margin-top: 40px;
        padding-top: 25px;
        border-top: 2px solid #f0f0f0;
      }
      .score-area h3 {
        text-align: center;
        color: #333;
        font-size: 20px;
        margin-bottom: 20px;
      }
      .score-item {
        font-size: 17px;
        line-height: 2;
        color: #222;
        margin-bottom: 8px;
        padding: 6px 0;
      }
      .score-item strong {
        color: #e74c3c;
        font-weight: bold;
      }
      /* æ­£äº”è¾¹å½¢é›·è¾¾å›¾å®¹å™¨ */
      .radar-chart-area {
        margin-top: 30px;
        padding: 20px 10px;
        background: #f9fafe;
        border-radius: 8px;
        text-align: center;
        max-height: 400px;
        overflow: hidden;
      }
      .radar-chart-area h4 {
        color: #333;
        margin-bottom: 15px;
        font-size: 18px;
      }
      /* å¼ºåˆ¶1:1æ¯”ä¾‹å®¹å™¨ */
      .chart-container {
        position: relative;
        width: 100%;
        max-width: 350px;
        height: 350px;
        margin: 0 auto;
      }
      #radarChart {
        width: 100% !important;
        height: 100% !important;
      }
      .tips {
        color: #666;
        font-size: 14px;
        margin-top: 20px;
        line-height: 1.5;
        text-align: center;
        padding-top: 10px;
        border-top: 1px dashed #eee;
      }
    </style>
    <!-- å¼•å…¥Chart.js -->
    <script src="chart.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>å¿ƒç†æµ‹è¯•ï¼ˆç†µå€¼ç»´åº¦åˆ†æï¼Œæ­£äº”è¾¹å½¢é›·è¾¾å›¾ï¼‰</h1>
      <div class="btn-box">
        <button class="reset-btn" id="resetBtn">
          é‡æ–°æµ‹è¯•ï¼ˆæ¸…ç©ºæ‰€æœ‰ç­”æ¡ˆï¼‰
        </button>
      </div>
      <div id="questionBox"></div>
      <div class="score-area">
        <h3>ğŸ“Š ä½ çš„å®Œæ•´æµ‹è¯•ç»“æœåˆ†æ</h3>
        <div class="score-item">
          ä½ çš„æµ‹è¯•æ€»åˆ†ï¼š<strong id="totalScore"
            >è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®åæŸ¥çœ‹åˆ†æ•°</strong
          >
        </div>
        <div class="score-item">
          æˆ‘å½“å‰çš„æ€»ç†µå€¼æ˜¯ï¼š<strong id="totalEntropy">--</strong>ï¼Œæš‚æ—¶å¤„äº
          <strong id="entropyStatus">â–¡ä½ç†µ â–¡ä¸­ç†µ â–¡é«˜ç†µ</strong> çŠ¶æ€ã€‚
          <p class="tips">
            ï¼ˆæ»¡åˆ†160åˆ†ï¼Œåˆ†æ•°è¶Šé«˜ç†µå€¼è¶Šé«˜ï¼›32ï½64åˆ†ä¸ºä½ç†µæ®µï¼Œ65ï½127åˆ†ä¸ºä¸­ç†µæ®µï¼Œ128ï½160åˆ†ä¸ºé«˜ç†µæ®µã€‚ï¼‰
          </p>
        </div>
        <hr style="margin: 15px 0; border: none; border-top: 1px solid #eee" />
        <div class="score-item">
          ã€Œå°é—­ç¨‹åº¦ã€ ç›¸å…³é¢˜å·ï¼š1ï½8é¢˜ã€17ï½24é¢˜
          <br />æˆ‘çš„å¾—åˆ†ï¼š<strong id="closeScore">--</strong> ï¼Œæš‚æ—¶ä¸º<strong
            id="closeStatus"
            >â–¡æˆé•¿å‹ â–¡å›ºåŒ–å‹</strong
          >
          æ€ç»´å€¾å‘ã€‚
          <p class="tips">
            åˆ†æ•°è¶Šä½è¯´æ˜è¶Šå¼€æ”¾ï¼Œè¶Šé«˜åˆ™è¶Šå°é—­ï¼›å°äº40åˆ†ä¸ºæˆé•¿å‹æ€ç»´å€¾å‘ï¼›å¤§äº40åˆ†ä¸ºå›ºåŒ–å‹æ€ç»´å€¾å‘ã€‚
          </p>
        </div>
        <div class="score-item">
          ã€ŒåšåŠŸé˜»åŠ›ã€ ç›¸å…³é¢˜å·ï¼š9ï½16é¢˜ã€25ï½32é¢˜
          <br />æˆ‘çš„å¾—åˆ†ï¼š<strong id="resistanceScore">--</strong>
          ï¼Œæš‚æ—¶ä¸º<strong id="resistanceStatus">â–¡å¢æ•ˆå‹ â–¡å†…è€—å‹</strong>
          åšåŠŸå€¾å‘ã€‚
          <p class="tips">
            åˆ†æ•°è¶Šä½è¶Šé«˜æ•ˆï¼Œè¶Šé«˜åˆ™è¶Šä½æ•ˆï¼›å°äº40åˆ†ä¸ºå¢æ•ˆåšåŠŸå€¾å‘ï¼Œå¤§äº40åˆ†ä¸ºå†…è€—åšåŠŸå€¾å‘ã€‚
          </p>
        </div>
        <hr style="margin: 15px 0; border: none; border-top: 1px solid #eee" />
        <div class="score-item">â—† äº”å‘ç†µç»´å¾—åˆ†ï¼ˆæ¯ä¸ªç»´åº¦1~5åˆ†ï¼‰</div>
        <div class="score-item">
          ã€Œå°é—­æ€§ã€å¾—åˆ†ï¼š<strong id="dim1Score">--</strong>
          (é¢˜å·1-4ã€17-20ï¼Œæ€»åˆ†Ã·8)
        </div>
        <div class="score-item">
          ã€Œå¹³è¡¡æ€ã€å¾—åˆ†ï¼š<strong id="dim2Score">--</strong>
          (é¢˜å·5-6ã€21-22ï¼Œæ€»åˆ†Ã·4)
        </div>
        <div class="score-item">
          ã€Œé«˜çº¿æ€§ã€å¾—åˆ†ï¼š<strong id="dim3Score">--</strong>
          (é¢˜å·7-8ã€23-24ï¼Œæ€»åˆ†Ã·4)
        </div>
        <div class="score-item">
          ã€Œå†…å¿ƒå¤±åºã€å¾—åˆ†ï¼š<strong id="dim4Score">--</strong>
          (é¢˜å·9-12ã€25-28ï¼Œæ€»åˆ†Ã·8)
        </div>
        <div class="score-item">
          ã€Œèƒ½é‡å¤±ç„¦ã€å¾—åˆ†ï¼š<strong id="dim5Score">--</strong>
          (é¢˜å·13-16ã€29-32ï¼Œæ€»åˆ†Ã·8)
        </div>

        <!-- æ­£äº”è¾¹å½¢é›·è¾¾å›¾åŒºåŸŸ -->
        <div class="radar-chart-area">
          <h4>ğŸ¯ æˆ‘çš„äº”å‘ç†µç»´é›·è¾¾å›¾</h4>
          <div class="chart-container">
            <canvas id="radarChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ========== æ ¸å¿ƒé…ç½®åŒºï¼šæ›¿æ¢ä¸ºä½ æä¾›çš„32é“é¢˜ç›® ==========
      const testQuestions = [
        {
          id: 1,
          title: "1. æˆ‘æ„Ÿåˆ°æ¯å¤©éƒ½åœ¨æœè‡ªå·±çš„ç›®æ ‡è¿ˆè¿›",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 2,
          title: "2. æœ‰éº»çƒ¦çš„æ—¶å€™ï¼Œæˆ‘é€šå¸¸èƒ½æƒ³åˆ°ä¸€äº›åº”ä»˜çš„æ–¹æ³•",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 3,
          title:
            "3. ä¸€äº›æŠ€èƒ½ï¼ˆæ¯”å¦‚è·‘æ­¥ã€æ¼”è®²ã€å†™ä½œï¼‰ï¼Œå³ä½¿æˆ‘å†åŠªåŠ›ï¼Œä¹Ÿä¸ä¼šå­¦å¾—å¤šå¥½",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 4,
          title: "4. æˆ‘è®¤ä¸ºé€†å¢ƒæœ‰æ—¶å€™æ˜¯å¯¹æˆé•¿çš„ä¸€ç§å¸®åŠ©",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 5,
          title: "5. å½“ä¸€ä¸ªæœ‰éš¾åº¦çš„å·¥ä½œéœ€è¦äººåšæ—¶ï¼Œæˆ‘ä¸å¸Œæœ›é‚£äººæ˜¯æˆ‘",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 6,
          title: "6. æˆ‘ä¸å–œæ¬¢æ‰€æœ‰æ–°é²œä¸”ç»å¸¸å˜åŒ–çš„äº‹",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 7,
          title: "7. æ— è®ºæ˜¯ä»€ä¹ˆäº‹æƒ…ï¼Œä¸€æ—¦å¼€å§‹äº†æˆ‘å°±ä¼šåšæŒä¸‹å»ç›´è‡³å®Œæˆ",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 8,
          title: "8. æˆ‘è§‰å¾—ä¸ç»“æœç›¸æ¯”ï¼Œåšä¸€ä»¶äº‹çš„è¿‡ç¨‹æ›´èƒ½å¤Ÿå¸®åŠ©äººæˆé•¿",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 9,
          title: "9. å½“å¾—çŸ¥ä¸€ä¸ªåæ¶ˆæ¯æ—¶ï¼Œæˆ‘çš„æƒ…ç»ªé€šå¸¸ä¼šæ¯”å…¶ä»–äººæ›´æ¿€çƒˆ",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 10,
          title: "10. æˆ‘ç»å¸¸è¯•å›¾æ‘†è„±è„‘ä¸­ä¸€äº›ä¸å¿…è¦çš„æƒ³æ³•",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 11,
          title: "11. æˆ‘æ€»æ˜¯éœ€è¦å…‹åˆ¶è‡ªå·±æƒ³è¦ä¸€ç›´ä¼‘é—²ã€å¨±ä¹ã€æ”¾æ¾çš„æ¬²æœ›",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 12,
          title: "12. å¤±è´¥æ€»æ˜¯è®©æˆ‘åœ¨ç›¸å½“é•¿ä¸€æ®µæ—¶é—´å†…æ„Ÿåˆ°æ°”é¦",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 13,
          title: "13. æˆ‘åœ¨å·¥ä½œæˆ–å­¦ä¹ æ—¶ï¼Œè„‘å­é‡Œå¸¸ä¼šæƒ³åˆ°å…¶ä»–ä¸ç›¸å¹²çš„äº‹æƒ…",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 14,
          title: "14. æˆ‘å¸¸å¸¸èƒ½åœ¨è‡ªå·±æ‰€åšçš„äº‹æƒ…ä¸­æ‰¾åˆ°ä¹è¶£",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 15,
          title: "15. å½“è¢«è¿«åœ¨å‹åŠ›ä¸‹å·¥ä½œæ—¶ï¼Œæˆ‘æ„Ÿåˆ°å¿ƒçƒ¦æ„ä¹±åˆæä¸æƒ…æ„¿",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 16,
          title: "16. å½“ç¢°åˆ°ä¸€ä¸ªæ²¡æœ‰æŠŠæ¡è§£å†³çš„éš¾é¢˜æ—¶ï¼Œæˆ‘ä¼šéå¸¸å…´å¥‹ã€å¿«ä¹",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 17,
          title: "17. æˆ‘çŸ¥é“è‡ªå·±ç°åœ¨æ˜¯ä¸ºäº†ä»€ä¹ˆè€ŒåŠªåŠ›",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 18,
          title: "18. æˆ‘ç›¸ä¿¡è‡ªå·±èƒ½æœ‰æ•ˆåº”å¯¹ä»»ä½•ç”Ÿæ´»ä¸­çªå‘çš„æ„å¤–",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 19,
          title: "19. ä¸ç®¡æˆ‘æ‰€åšçš„äº‹æˆç»©å¥½åï¼Œæˆ‘éƒ½ä»ä¸æ€€ç–‘è‡ªå·±çš„å­¦ä¹ èƒ½åŠ›",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 20,
          title: "20. ç»å†æŒ«æŠ˜åæˆ‘ä¸€èˆ¬ä¼šå˜å¾—æ›´åŠ æˆç†Ÿå’Œæœ‰ç»éªŒ",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 21,
          title: "21. æˆ‘ä¸å–œæ¬¢åšé‚£äº›æˆ‘ä¸çŸ¥é“èƒ½å¦é¡ºåˆ©å®Œæˆçš„äº‹",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 22,
          title: "22. æˆ‘ä¸å–œæ¬¢åœ¨ä¸ç†Ÿæ‚‰çš„ç¯å¢ƒä¸­åšäº‹",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 23,
          title: "23. æˆ‘å–œæ¬¢é‚£ç§éœ€è¦å…¨åŠ›ä»¥èµ´æ‰èƒ½å®Œæˆçš„å·¥ä½œ",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 24,
          title:
            "24. ä¸ç®¡ä¸€ä»¶äº‹çš„ç»“æœå¦‚ä½•ï¼Œæˆ‘ç›¸ä¿¡è‡ªå·±åœ¨è¿‡ç¨‹ä¸­ä»˜å‡ºçš„åŠªåŠ›æ˜¯ä¸ä¼šç™½è´¹çš„",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 25,
          title: "25. æ¯æ¬¡æœ‰æƒ…ç»ªæ³¢åŠ¨çš„æ—¶å€™ï¼Œæˆ‘éƒ½èƒ½ç¬¬ä¸€æ—¶é—´è§‰å¯Ÿ",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 26,
          title: "26. æˆ‘å¸¸å¸¸è¯•ç€ä¸å»æƒ³ã€ä¹Ÿä¸å’Œäººè®¨è®ºè®©æˆ‘çƒ¦æ¼çš„äº‹æƒ…",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 27,
          title: "27. æˆ‘ç»å¸¸å¾—æŠµæŠ—ç¾é£Ÿçš„è¯±æƒ‘",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 28,
          title: "28. æˆ‘ä¸€èˆ¬è¦è¿‡å¾ˆä¹…æ‰èƒ½å¿˜è®°ä¸æ„‰å¿«çš„äº‹æƒ…",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 29,
          title:
            "29. æˆ‘åœ¨å·¥ä½œæˆ–å­¦ä¹ æ—¶ï¼Œå¯¹å‘¨å›´çš„åŠ¨é™æ¯”å¦‚æœ‰äººè¯´è¯å’Œå€’æ°´å¬å¾—å¾ˆæ¸…æ¥š",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 30,
          title: "30. åªè¦æ˜¯èƒ½è·å¾—æ»¡è¶³æ„Ÿçš„å·¥ä½œï¼Œå“ªæ€•æ²¡æœ‰æŠ¥é…¬æˆ‘ä¹Ÿæ„¿æ„åš",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
        {
          id: 31,
          title: "31. é¢å¯¹å‹åŠ›æ—¶ï¼Œæˆ‘ä¼šæ€è€ƒè‡ªå·±åšäº†ä»€ä¹ˆäº‹æƒ…è¦æ‰¿å—è¿™äº›",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 1 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 2 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 4 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 5 },
          ],
        },
        {
          id: 32,
          title: "32. é¢å¯¹çš„äº‹è¶Šå›°éš¾ï¼Œæˆ‘è¶Šèƒ½é›†ä¸­è‡ªå·±çš„å…¨éƒ¨ç²¾åŠ›å»é¢å¯¹",
          options: [
            { text: "å®Œå…¨ä¸ç¬¦", score: 5 },
            { text: "ä¸å¤ªç¬¦åˆ", score: 4 },
            { text: "ä¸€èˆ¬", score: 3 },
            { text: "æ¯”è¾ƒç¬¦åˆ", score: 2 },
            { text: "å®Œå…¨ç¬¦åˆ", score: 1 },
          ],
        },
      ];

      // ========== å…¨å±€å˜é‡ ==========
      const questionBox = document.getElementById("questionBox");
      const totalScoreDom = document.getElementById("totalScore");
      const totalEntropyDom = document.getElementById("totalEntropy");
      const entropyStatusDom = document.getElementById("entropyStatus");
      const closeScoreDom = document.getElementById("closeScore");
      const closeStatusDom = document.getElementById("closeStatus");
      const resistanceScoreDom = document.getElementById("resistanceScore");
      const resistanceStatusDom = document.getElementById("resistanceStatus");
      const dim1ScoreDom = document.getElementById("dim1Score");
      const dim2ScoreDom = document.getElementById("dim2Score");
      const dim3ScoreDom = document.getElementById("dim3Score");
      const dim4ScoreDom = document.getElementById("dim4Score");
      const dim5ScoreDom = document.getElementById("dim5Score");
      const resetBtn = document.getElementById("resetBtn");
      const radarChartDom = document.getElementById("radarChart");
      let answerResult = {};
      const STORAGE_KEY = "psy_test_answer_result";
      let radarChartInstance = null;

      // ========== åˆå§‹åŒ– ==========
      function initPage() {
        const localResult = localStorage.getItem(STORAGE_KEY);
        if (localResult) {
          answerResult = JSON.parse(localResult);
        }
        renderQuestions();
        bindOptionClick();
        bindResetBtn();
        calculateAllScore();
      }

      // ========== æ¸²æŸ“é¢˜ç›® ==========
      function renderQuestions() {
        questionBox.innerHTML = "";
        testQuestions.forEach((question) => {
          const questionItem = document.createElement("div");
          questionItem.className = "question-item";
          questionItem.dataset.id = question.id;

          let questionHtml = `<div class="question-title">${question.title}</div>`;
          questionHtml += '<ul class="option-list">';

          question.options.forEach((option) => {
            const isActive =
              answerResult[question.id] === option.score ? "active" : "";
            questionHtml += `<li class="option-item ${isActive}" data-score="${option.score}" data-qid="${question.id}">${option.text}</li>`;
          });
          questionHtml += "</ul>";
          questionItem.innerHTML = questionHtml;
          questionBox.appendChild(questionItem);
        });
      }

      // ========== ç»‘å®šé€‰é¡¹ç‚¹å‡»äº‹ä»¶ ==========
      function bindOptionClick() {
        const allOptions = document.querySelectorAll(".option-item");
        allOptions.forEach((option) => {
          option.addEventListener("click", function () {
            const qid = this.dataset.qid;
            const score = parseInt(this.dataset.score);
            document
              .querySelectorAll(`.option-item[data-qid="${qid}"]`)
              .forEach((item) => item.classList.remove("active"));
            this.classList.add("active");
            answerResult[qid] = score;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(answerResult));
            calculateAllScore();
          });
        });
      }

      // ========== ç»‘å®šé‡æ–°æµ‹è¯•æŒ‰é’® ==========
      function bindResetBtn() {
        resetBtn.addEventListener("click", function () {
          answerResult = {};
          localStorage.removeItem(STORAGE_KEY);
          renderQuestions();
          bindOptionClick();
          resetScoreDom();
          if (radarChartInstance) {
            radarChartInstance.destroy();
            radarChartInstance = null;
            const ctx = radarChartDom.getContext("2d");
            ctx.clearRect(0, 0, radarChartDom.width, radarChartDom.height);
          }
        });
      }

      // ========== é‡ç½®åˆ†æ•°æ˜¾ç¤º ==========
      function resetScoreDom() {
        totalScoreDom.innerHTML = "è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®åæŸ¥çœ‹åˆ†æ•°";
        totalEntropyDom.innerHTML = "--";
        entropyStatusDom.innerHTML = "â–¡ä½ç†µ â–¡ä¸­ç†µ â–¡é«˜ç†µ";
        closeScoreDom.innerHTML = "--";
        closeStatusDom.innerHTML = "â–¡æˆé•¿å‹ â–¡å›ºåŒ–å‹";
        resistanceScoreDom.innerHTML = "--";
        resistanceStatusDom.innerHTML = "â–¡å¢æ•ˆå‹ â–¡å†…è€—å‹";
        dim1ScoreDom.innerHTML = "--";
        dim2ScoreDom.innerHTML = "--";
        dim3ScoreDom.innerHTML = "--";
        dim4ScoreDom.innerHTML = "--";
        dim5ScoreDom.innerHTML = "--";
      }

      // ========== ç»˜åˆ¶æ­£äº”è¾¹å½¢é›·è¾¾å›¾ ==========
      function renderRadarChart(dimScores) {
        if (radarChartInstance) {
          radarChartInstance.destroy();
          radarChartInstance = null;
        }

        const labels = ["å°é—­æ€§", "é«˜çº¿æ€§", "èƒ½é‡å¤±ç„¦", "å†…å¿ƒå¤±åº", "å¹³è¡¡æ€"];
        const data = [
          parseFloat(dimScores.dim1),
          parseFloat(dimScores.dim3),
          parseFloat(dimScores.dim5),
          parseFloat(dimScores.dim4),
          parseFloat(dimScores.dim2),
        ];

        const config = {
          type: "radar",
          data: {
            labels: labels,
            datasets: [
              {
                label: "æˆ‘çš„äº”å‘ç†µç»´å¾—åˆ†",
                data: data,
                backgroundColor: "rgba(74, 143, 220, 0.2)",
                borderColor: "rgba(74, 143, 220, 1)",
                borderWidth: 2,
                pointBackgroundColor: "rgba(74, 143, 220, 1)",
                pointRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1,
            scales: {
              r: {
                angleLines: {
                  display: true,
                  color: "rgba(0, 0, 0, 0.1)",
                },
                grid: {
                  color: "rgba(0, 0, 0, 0.1)",
                },
                pointLabels: {
                  font: {
                    size: 12,
                    family: "Microsoft YaHei",
                  },
                  color: "#333",
                  padding: 5,
                },
                ticks: {
                  backdropColor: "transparent",
                  stepSize: 1,
                  min: 1,
                  max: 5,
                  font: {
                    size: 10,
                  },
                  padding: 3,
                },
                suggestedMin: 1,
                suggestedMax: 5,
              },
            },
            plugins: {
              legend: {
                position: "top",
                labels: {
                  font: {
                    family: "Microsoft YaHei",
                    size: 12,
                  },
                  padding: 5,
                },
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return context.label + ": " + context.raw + " åˆ†";
                  },
                },
                boxPadding: 3,
              },
            },
            layout: {
              padding: {
                top: 5,
                right: 5,
                bottom: 5,
                left: 5,
              },
            },
          },
        };

        radarChartInstance = new Chart(radarChartDom, config);
      }

      // ========== è®¡ç®—æ‰€æœ‰åˆ†æ•° ==========
      function calculateAllScore() {
        const answeredCount = Object.keys(answerResult).length;
        const totalQuestionCount = testQuestions.length;

        if (answeredCount < totalQuestionCount) {
          totalScoreDom.innerHTML = `è¿˜å‰© ${totalQuestionCount - answeredCount} é“é¢˜æœªç­”ï¼Œè¯·å®Œæˆæ‰€æœ‰é¢˜ç›®`;
          totalScoreDom.style.color = "#666";
          if (radarChartInstance) {
            radarChartInstance.destroy();
            radarChartInstance = null;
            const ctx = radarChartDom.getContext("2d");
            ctx.clearRect(0, 0, radarChartDom.width, radarChartDom.height);
          }
          return;
        }

        // è®¡ç®—æ€»å¾—åˆ†
        let totalScore = 0;
        for (const score of Object.values(answerResult)) {
          totalScore += score;
        }
        totalScoreDom.innerHTML = `${totalScore} åˆ†ï¼ˆæ»¡åˆ†160åˆ†ï¼‰`;
        totalScoreDom.style.color = "#e74c3c";
        totalEntropyDom.innerHTML = totalScore;

        // åˆ¤å®šç†µå€¼çŠ¶æ€
        let entropyStatus = "";
        if (totalScore >= 32 && totalScore <= 64) {
          entropyStatus = "âœ…ä½ç†µ â–¡ä¸­ç†µ â–¡é«˜ç†µ";
        } else if (totalScore >= 65 && totalScore <= 127) {
          entropyStatus = "â–¡ä½ç†µ âœ…ä¸­ç†µ â–¡é«˜ç†µ";
        } else if (totalScore >= 128 && totalScore <= 160) {
          entropyStatus = "â–¡ä½ç†µ â–¡ä¸­ç†µ âœ…é«˜ç†µ";
        }
        entropyStatusDom.innerHTML = entropyStatus;

        // è®¡ç®—å°é—­ç¨‹åº¦
        const closeIds = [
          1, 2, 3, 4, 5, 6, 7, 8, 17, 18, 19, 20, 21, 22, 23, 24,
        ];
        let closeScore = closeIds.reduce(
          (sum, id) => sum + answerResult[id],
          0
        );
        closeScoreDom.innerHTML = closeScore;
        let closeStatus =
          closeScore < 40 ? "âœ…æˆé•¿å‹ â–¡å›ºåŒ–å‹" : "â–¡æˆé•¿å‹ âœ…å›ºåŒ–å‹";
        closeStatusDom.innerHTML = closeStatus;

        // è®¡ç®—åšåŠŸé˜»åŠ›
        const resistanceIds = [
          9, 10, 11, 12, 13, 14, 15, 16, 25, 26, 27, 28, 29, 30, 31, 32,
        ];
        let resistanceScore = resistanceIds.reduce(
          (sum, id) => sum + answerResult[id],
          0
        );
        resistanceScoreDom.innerHTML = resistanceScore;
        let resistanceStatus =
          resistanceScore < 40 ? "âœ…å¢æ•ˆå‹ â–¡å†…è€—å‹" : "â–¡å¢æ•ˆå‹ âœ…å†…è€—å‹";
        resistanceStatusDom.innerHTML = resistanceStatus;

        // è®¡ç®—äº”å‘ç†µç»´å¾—åˆ†
        const dim1Ids = [1, 2, 3, 4, 17, 18, 19, 20];
        const dim1Score = (
          dim1Ids.reduce((sum, id) => sum + answerResult[id], 0) / 8
        ).toFixed(2);
        dim1ScoreDom.innerHTML = dim1Score;

        const dim2Ids = [5, 6, 21, 22];
        const dim2Score = (
          dim2Ids.reduce((sum, id) => sum + answerResult[id], 0) / 4
        ).toFixed(2);
        dim2ScoreDom.innerHTML = dim2Score;

        const dim3Ids = [7, 8, 23, 24];
        const dim3Score = (
          dim3Ids.reduce((sum, id) => sum + answerResult[id], 0) / 4
        ).toFixed(2);
        dim3ScoreDom.innerHTML = dim3Score;

        const dim4Ids = [9, 10, 11, 12, 25, 26, 27, 28];
        const dim4Score = (
          dim4Ids.reduce((sum, id) => sum + answerResult[id], 0) / 8
        ).toFixed(2);
        dim4ScoreDom.innerHTML = dim4Score;

        const dim5Ids = [13, 14, 15, 16, 29, 30, 31, 32];
        const dim5Score = (
          dim5Ids.reduce((sum, id) => sum + answerResult[id], 0) / 8
        ).toFixed(2);
        dim5ScoreDom.innerHTML = dim5Score;

        // ç»˜åˆ¶é›·è¾¾å›¾
        renderRadarChart({
          dim1: dim1Score,
          dim2: dim2Score,
          dim3: dim3Score,
          dim4: dim4Score,
          dim5: dim5Score,
        });
      }

      // ========== é¡µé¢åŠ è½½å®Œæˆåˆå§‹åŒ– ==========
      window.onload = function () {
        initPage();
      };
    </script>
  </body>
</html>
